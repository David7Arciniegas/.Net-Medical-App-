<!DOCTYPE html>
<html>
<head>
	<title>Doctor Search</title>
	<link rel="stylesheet" href="./css/js.css">
</head>
<body>

	<navbar>
		<div class="nav-container">
			<img class="logo" src="./clinical-logo.png" alt="">
			
		</div>
	</navbar>
	<form id="search-form">
		
		<label for="doctor-name" class="form-label">Doctor or clinic name:</label>
		<input type="text" id="doctor-name" name="doctorName" class="form-input">

		<label for="city" class="form-label">City:</label>
		<input type="text" id="city" name="city" class="form-input">

		<button type="submit" class="form-button">Search</button>
	</form>

	<div id="results" class="results-container"></div>

	
	<script>
		const form = document.querySelector('#search-form');
		const resultsContainer = document.querySelector('#results');

		form.addEventListener('submit', (event) => {
			event.preventDefault(); // Prevent the form from submitting normally

			const doctorName = document.querySelector('#doctor-name').value;
			const city = document.querySelector('#city').value;

			// Send a GET request to the API endpoint
			fetch(`/api/DoctorSearchApi?doctorOrClinicName=${doctorName}&city=${city}`)
				.then(response => response.json())
				.then(results => {
					// Display the results on the page
					resultsContainer.innerHTML = '';
					if (results.length > 0) {
						results.forEach(result => {
							const resultElement = document.createElement('div');
							resultElement.textContent = `${result.name} - ${result.city}`;
							resultElement.classList.add('result-item');
							resultsContainer.appendChild(resultElement);
						});
					} else {
						resultsContainer.textContent = 'No results found.';
					}
				})
					.catch(error => {
					console.error(error);
					resultsContainer.textContent = 'An error occurred while fetching results.';
				});
			});
	</script>
</body>
</html>
